head
  title Haven
body
    if currentUser
      +navbar
      +chat
    else
      .uk-grid.container--full-height
        .container--full-height.uk-flex.uk-flex-center.uk-flex-middle.uk-width-1-1
          .uk-container.uk-container-center
            h1 Haven
            +login

template(name='navbar')
  .uk-grid
    .uk-navbar.uk-width-1-1
      .uk-container.uk-container-center
        ul.uk-navbar-nav
          li Haven
          +newChat
        .uk-navbar-flip
          ul.uk-navbar-nav
            +login

template(name='login')
  if currentUser
    button.button-login Log out #{currentUser.profile.name}
  else
    button.button-login Log in with Facebook

template(name='chat')
  .uk-container.uk-container-center
    .uk-grid
      .uk-width-1-1
        +search
      .uk-width-3-10
        +rooms
      .uk-width-7-10
        +messages
        +input

template(name='newChat')
  if currentUser
    button.button-newChat Find New Chat

template(name='search')
  h2 Talk to me about...
  form.searchform
    .js-search--autocomplete.search--autocomplete
      input.search--input(type='text', placeholder='Enter tags:')
  each currentUser.profile.tags
    +tag

template(name='tag')
  .tag
    span.tag--name.js-tag--name #{this}
    span.tag--close.js-tag--close &times;


template(name='input')
  input#msg(type='text', placeholder='Type your message here...')
  input(type='button', value='Send Message')

template(name='messages')
  h4 Chat: #{roomname}
  #messages
    each messages
      +message

template(name='message')
  p #{user} (#{timestamp}) #{msg}

template(name='rooms')
  h4 My Chats
  ul
    each rooms
      +room

template(name='room')
  li.chat--name #{roomname}

template(name='tags')
  select(multiple, data-role="tagsinput")
    each currentUser.profile.tags
      option(value=this)
